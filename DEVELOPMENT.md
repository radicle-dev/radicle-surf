
# Radicle Surfing ğŸ„

Thanks for wanting to contribute to `radicle-surf`!

# Licensing

We are [GPL-3.0-or-later](./LICENSE) licensed project. To keep in compliance with this we must
add a [license header](./.license-header) to any new files added. This is checked on each run of CI.

## Building & Testing ğŸ—ï¸

We try to make development as seemless as possible so we can get down to the real work. We supply
the toolchain via the `rust-toolchain` file, and the formatting rules `.rustmt.toml` file.

For the [Nix](https://nixos.org/) inclined there is a `default.nix` file to get all the necessary
dependencies and it also uses the `rust-toolchain` file to pin to that version of Rust.

First, if you haven't already, you should set up the submodule under `data/git-platinum`. Do this by
the script:

```bash
$ ./scripts/submodule.sh
```

The `build.rs` file takes care of setting up specific references for testing purposes. So to build
and test `radicle-surf` we need to run with the `GIT_FIXTURES` set. **Note** that it's only
necessary to do this once.

```bash
$ GIT_FIXTURES=1 cargo build
```

and

```bash
$ GIT_FIXTURES=1 cargo test
```

For the full list of commands that get executed on CI you can checkout the [ci/run](./ci/run) script.

If any of this _isn't_ working, then let's work through it together and get it Working on Your
Machineâ„¢.

## Structure ğŸ›ï¸

The design of `radicle-surf` is to have an in-memory representation of a project's directory which
can be generated by a VCS's backend. The directory system is modeled under `file_system`, the VCS
functionality is naturally under `vcs`, and `diff` logic is held under `diff`.

```
src/
â”œâ”€â”€ diff
â”œâ”€â”€ file_system
â””â”€â”€ vcs
```

## Testing & Documentation ğŸ“š

We ensure that the crate is well documented. `cargo clippy` will argue with you anytime a public
facing piece of the library is undocumented. We should always provide an explanation of what
something is or does, and also provide examples to allow our users to get up and running as quick
and easy as possible.

When writing documentation we should try provide one or two examples (if they make sense). This
provides us with some simple unit tests as well as something our users can copy and paste for ease
of development.

If more tests are needed then we should add them under `mod tests` in the relevant module. We strive
to find properties of our programs so that we can use tools like `proptest` to extensively prove our
programs are correct. As well as this, we add unit tests to esnure the examples in our heads are
correct, and testing out the ergonomics of our API first-hand.

## CI files ğŸ¤–

Our CI infrastructure runs on Buildkite. The build process is run for every commit which is pushed
to GitHub.

All relevant configuration can be found here:

```
radicle-surf/.buildkite/
â”œâ”€â”€ docker
â”‚Â Â  â”œâ”€â”€ build
â”‚Â Â  â”‚Â Â  â””â”€â”€ Dockerfile
â”‚Â Â  â””â”€â”€ rust-nightly
â”‚Â Â      â””â”€â”€ Dockerfile
â””â”€â”€ pipeline.yaml
```

## Releases ğŸ“…

TODO: Once we get the API into a good shape we will keep track of releases via a `CHANGELOG.md` and
tag the releases via `git tag`.
